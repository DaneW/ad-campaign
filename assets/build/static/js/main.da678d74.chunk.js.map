{"version":3,"sources":["components/templateSelector.js","components/adEditor.js","components/campaignCreator.js","App.js","index.js"],"names":["TemplateSelector","handleChange","event","handleSelect","_this","props","target","value","_this$props","this","templates","templateId","length","react_default","a","createElement","htmlFor","name","onChange","disabled","map","_ref","id","title","key","Component","AdEditor","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","obj","idx","update","property","updateValue","titles","copies","images","toConsumableArray","changeValueModifier","resources","currModifier","state","valueModifier","index","setState","Name","Description","Image","renderList","e","i","renderEditors","_this$props2","_","CampaignCreator","updateObjective","objective","handleUpdate","defineProperty","handleSave","preventDefault","saveCampaign","_this$state","template","adTitle","adCopy","adImage","isValid","_this$state2","prevProps","_this$props$template","ads","compainObjective","reduce","acc","curr","concat","copy","image","_this$state3","adEditor","type","checked","onClick","API","save","publish","App","reset","campaignId","error","selectTemplate","find","t","campaign","fetch","method","body","JSON","stringify","then","response","json","catch","publishCampaign","loading","_this2","Promise","all","href","templateSelector","campaignCreator","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.da678d74.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass TemplateSelector extends Component {\n  static propTypes = {\n    templateId: PropTypes.string,\n    templates: PropTypes.array,\n    handleSelect: PropTypes.func, \n  }\n\n  handleChange = event => {\n    const { handleSelect } = this.props;\n    handleSelect(event.target.value);\n  };\n\n  render() {\n    const { templates, templateId } = this.props;\n    if (!templates || !templates.length) return null;\n    return (\n      <div>\n        <label htmlFor=\"template-selector\">Template: </label>\n        <select name=\"template-selector\" value={templateId} onChange={this.handleChange}>\n          <option disabled value=\"default\"> Select a Template </option>\n          {templates.map(({ id, title }) => <option key={id} value={id}>{title}</option>)}\n        </select>\n      </div>\n    );\n  }\n}\n\nexport default TemplateSelector;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\n\nclass AdEditor extends Component {\n  static propTypes = {\n    resources: PropTypes.array,\n    titles: PropTypes.array,\n    copies: PropTypes.array,\n    images: PropTypes.array,\n    updateValue: PropTypes.func,\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      valueModifier: [-1, -1, -1],\n    };\n  }\n\n  handleChange = (event, obj, idx) => {\n    const { updateValue, titles, copies, images } = this.props;\n    let update;\n    let property;\n    switch(obj) {\n      case \"title\":\n        update = [ ...titles ];\n        property = 'adTitle';\n        break;\n      case \"copy\":\n        update = [ ...copies ];\n        property = 'adCopy';\n        break;\n      case \"image\":\n        update = [ ...images ];\n        property = 'adImage';\n        break;\n      default:\n        return;\n    }\n    if (update && property) {\n      const value = event.target ? event.target.value : event;\n      update[idx] = value;\n      updateValue(property, update);\n    }\n  };\n\n  changeValueModifier = (event, idx) => {\n    const { resources } = this.props;\n    const { valueModifier: currModifier } = this.state;\n    const index = event.target.value;\n    const valueModifier = [ ...currModifier ];\n    // Updating the current index\n    valueModifier[idx] = index;\n    this.setState({ valueModifier });\n    if (index < resources.length) {\n      this.handleChange(resources[index].Name, \"title\", idx);\n      this.handleChange(resources[index].Description, \"copy\", idx);\n      this.handleChange(resources[index].Image, \"image\", idx);\n    }\n  };\n\n  renderList = idx => {\n    const { valueModifier } = this.state;\n    const { resources } = this.props;\n    return (\n      <select onChange={e => this.changeValueModifier(e, idx)} value={valueModifier[idx]}>\n        <option disabled value={-1}>Default</option>\n        {resources.map(({ Name }, i) => <option key={i} value={i}>{Name}</option>)}\n        <option value={resources.length}>Custom</option>\n      </select>\n    );\n  }\n\n  renderEditors = () => {\n    const { valueModifier } = this.state;\n    const { titles, copies, images, resources } = this.props;\n    return titles.map((_, idx) => (\n      <div key={idx}>\n        <hr/>\n        {this.renderList(idx)}<br/>\n        <label>Title: </label>\n        <input \n          disabled={valueModifier[idx] !== resources.length + \"\"} \n          value={titles[idx]} \n          onChange={e => this.handleChange(e, \"title\", idx)} \n        />\n        <br/>\n        <label>Copy: </label>\n        <input \n          disabled={valueModifier[idx] !== resources.length + \"\"} \n          value={copies[idx]} \n          onChange={e => this.handleChange(e, \"copy\", idx)} \n        /><br/>\n        <label>Image: </label>\n        <input \n          disabled={valueModifier[idx] !== resources.length + \"\"} \n          value={images[idx]} \n          onChange={e => this.handleChange(e, \"image\", idx)} \n        />\n      </div>\n    ));\n  };\n\n  render() {\n    return (\n      <div>\n        {this.renderEditors()}\n      </div>\n    );\n  }\n\n}\n\nexport default AdEditor;","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport AdEditor from './adEditor';\n\nclass CampaignCreator extends Component {\n  static propTypes = {\n    template: PropTypes.object,\n    saveCampaign: PropTypes.func,\n    resources: PropTypes.array,\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      title: null,\n      adTitle: [],\n      adCopy: [],\n      adImage: [],\n      objective: null,\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    const { template } = this.props;\n    if (template && template !== prevProps.template) {\n      const { template: { ads, compainObjective: objective, title } } = this.props;\n      const adTitle = ads.reduce((acc, curr) => [...acc, curr.title], []);\n      const adCopy = ads.reduce((acc, curr) => [...acc, curr.copy], []);\n      const adImage = ads.reduce((acc, curr) => [...acc, curr.image], []);\n      this.setState({\n        title,\n        adTitle,\n        adCopy,\n        adImage,\n        objective,\n      });\n    }\n  }\n\n  updateObjective = event => {\n    const objective = event.target.value;\n    this.setState({ objective });\n  }\n\n  handleUpdate = (name, value) => {\n    this.setState({\n      [name]: value\n    });\n  }\n\n  handleSave = event => {\n    event.preventDefault();\n    const { saveCampaign } = this.props;\n    const { title, adTitle, adCopy, adImage, objective } = this.state;\n    saveCampaign({\n      template: title,\n      adTitle,\n      adCopy,\n      adImage,\n      objective,\n    });\n  };\n\n  isValid = () => {\n    const { adTitle, adCopy, adImage, objective } = this.state;\n    if (!(adTitle && adCopy && adImage && objective)) return false;\n    return true;\n  }\n\n  render() {\n    const { template, resources } = this.props;\n    const { adTitle, adCopy, adImage, objective } = this.state;\n    if (!template) return null;\n    return (\n      <form>\n        <AdEditor resources={resources} titles={adTitle} copies={adCopy} images={adImage} updateValue={this.handleUpdate}  />\n        <hr/>\n        <div onChange={this.updateObjective}>\n          <label><input type=\"radio\" value=\"LeadGeneration\" checked={objective === \"LeadGeneration\"} /> LeadGeneration</label>\n          <label><input type=\"radio\" value=\"Conversions\" checked={objective === \"Conversions\"} /> Conversions</label>\n          <label><input type=\"radio\" value=\"Impressions\" checked={objective === \"Impressions\"} /> Impressions</label>\n        </div>\n        <input type=\"submit\" value=\"Save\" disabled={!this.isValid()} onClick={this.handleSave} />\n      </form>\n    );\n  }\n}\n\nexport default CampaignCreator;\n","import React, { Component } from 'react';\nimport TemplateSelector from './components/templateSelector';\nimport CampaignCreator from './components/campaignCreator';\n\nconst API = {\n  templates: \"http://localhost:3000/api/v1/templates\",\n  resources: \"http://localhost:3000/api/v1/products\",\n  save: \"http://localhost:3000/api/v1/campaigns/create\",\n  publish: id => `http://localhost:3000/api/v1/campaigns/${id}/publish`,\n}\n\nclass App extends Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      template: null,\n      templates: [],\n      resources: [],\n      campaignId: null,\n      error: null,\n      loading: true,\n    };\n  }\n\n  componentDidMount() {\n    const templates = fetch(API.templates)\n      .then(response => response.json())\n      .then(templates => this.setState({ templates }))\n      .catch(error => this.setState({ error }));\n    const resources = fetch(API.resources)\n      .then(response => response.json())\n      .then(resources => this.setState({ resources }))\n      .catch(error => this.setState({ error }));\n    Promise.all([templates, resources]).then(() => {\n      this.setState({ loading: false });\n    });\n  }\n\n  reset = () => {\n    this.setState({\n      template: null,\n      campaignId: null,\n      error: null,\n    });\n  };\n\n  selectTemplate = templateId => {\n    const { templates } = this.state;\n    const template = templates.find(t => t.id === templateId);\n    this.setState({ template });\n  }\n\n  saveCampaign = campaign => {\n    fetch(API.save , { method: \"POST\", body: JSON.stringify(campaign) })\n      .then(response => response.json())\n      .then(({ id }) => this.setState({ campaignId: id }))\n      .catch(error => this.setState({ error }));\n  };\n\n  publishCampaign = () => {\n    const { campaignId } = this.state;\n    fetch(API.publish(campaignId) , { method: \"PUT\" })\n      .then(response => response.json())\n      .then(() => this.reset())\n      .catch(error => this.setState({ error }));\n  };\n\n  render() {\n    const { templates, resources, loading, template, campaignId } = this.state;\n    if (loading) return <p>Loading...</p>;\n    const templateId = template ? template.id : \"default\";\n    return (\n      <div>\n        <a href=\"http://localhost:3000/api/v1/templates\">Campaign Templates</a>{' '}\n        <a href=\"http://localhost:3000/api/v1/campaigns/published\">Published Campaigns</a><hr/>\n        <TemplateSelector templateId={templateId} templates={templates} handleSelect={this.selectTemplate}/>\n        <CampaignCreator resources={resources} template={template} saveCampaign={this.saveCampaign} />\n        {template && <button disabled={!campaignId} onClick={this.publishCampaign}>Publish</button>}\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}