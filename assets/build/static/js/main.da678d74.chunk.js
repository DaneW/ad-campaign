(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,a){e.exports=a(15)},15:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(8),i=a.n(r),c=a(2),o=a(3),u=a(5),s=a(4),p=a(6),m=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(u.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(l)))).handleChange=function(e){(0,a.props.handleSelect)(e.target.value)},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.templates,a=e.templateId;return t&&t.length?l.a.createElement("div",null,l.a.createElement("label",{htmlFor:"template-selector"},"Template: "),l.a.createElement("select",{name:"template-selector",value:a,onChange:this.handleChange},l.a.createElement("option",{disabled:!0,value:"default"}," Select a Template "),t.map(function(e){var t=e.id,a=e.title;return l.a.createElement("option",{key:t,value:t},a)}))):null}}]),t}(n.Component),d=a(1),h=a(9),v=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).handleChange=function(e,t,n){var l,r,i=a.props,c=i.updateValue,o=i.titles,u=i.copies,s=i.images;switch(t){case"title":l=Object(d.a)(o),r="adTitle";break;case"copy":l=Object(d.a)(u),r="adCopy";break;case"image":l=Object(d.a)(s),r="adImage";break;default:return}if(l&&r){var p=e.target?e.target.value:e;l[n]=p,c(r,l)}},a.changeValueModifier=function(e,t){var n=a.props.resources,l=a.state.valueModifier,r=e.target.value,i=Object(d.a)(l);i[t]=r,a.setState({valueModifier:i}),r<n.length&&(a.handleChange(n[r].Name,"title",t),a.handleChange(n[r].Description,"copy",t),a.handleChange(n[r].Image,"image",t))},a.renderList=function(e){var t=a.state.valueModifier,n=a.props.resources;return l.a.createElement("select",{onChange:function(t){return a.changeValueModifier(t,e)},value:t[e]},l.a.createElement("option",{disabled:!0,value:-1},"Default"),n.map(function(e,t){var a=e.Name;return l.a.createElement("option",{key:t,value:t},a)}),l.a.createElement("option",{value:n.length},"Custom"))},a.renderEditors=function(){var e=a.state.valueModifier,t=a.props,n=t.titles,r=t.copies,i=t.images,c=t.resources;return n.map(function(t,o){return l.a.createElement("div",{key:o},l.a.createElement("hr",null),a.renderList(o),l.a.createElement("br",null),l.a.createElement("label",null,"Title: "),l.a.createElement("input",{disabled:e[o]!==c.length+"",value:n[o],onChange:function(e){return a.handleChange(e,"title",o)}}),l.a.createElement("br",null),l.a.createElement("label",null,"Copy: "),l.a.createElement("input",{disabled:e[o]!==c.length+"",value:r[o],onChange:function(e){return a.handleChange(e,"copy",o)}}),l.a.createElement("br",null),l.a.createElement("label",null,"Image: "),l.a.createElement("input",{disabled:e[o]!==c.length+"",value:i[o],onChange:function(e){return a.handleChange(e,"image",o)}}))})},a.state={valueModifier:[-1,-1,-1]},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return l.a.createElement("div",null,this.renderEditors())}}]),t}(n.Component),f=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).updateObjective=function(e){var t=e.target.value;a.setState({objective:t})},a.handleUpdate=function(e,t){a.setState(Object(h.a)({},e,t))},a.handleSave=function(e){e.preventDefault();var t=a.props.saveCampaign,n=a.state;t({template:n.title,adTitle:n.adTitle,adCopy:n.adCopy,adImage:n.adImage,objective:n.objective})},a.isValid=function(){var e=a.state,t=e.adTitle,n=e.adCopy,l=e.adImage,r=e.objective;return!!(t&&n&&l&&r)},a.state={title:null,adTitle:[],adCopy:[],adImage:[],objective:null},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.template;if(t&&t!==e.template){var a=this.props.template,n=a.ads,l=a.compainObjective,r=a.title,i=n.reduce(function(e,t){return Object(d.a)(e).concat([t.title])},[]),c=n.reduce(function(e,t){return Object(d.a)(e).concat([t.copy])},[]),o=n.reduce(function(e,t){return Object(d.a)(e).concat([t.image])},[]);this.setState({title:r,adTitle:i,adCopy:c,adImage:o,objective:l})}}},{key:"render",value:function(){var e=this.props,t=e.template,a=e.resources,n=this.state,r=n.adTitle,i=n.adCopy,c=n.adImage,o=n.objective;return t?l.a.createElement("form",null,l.a.createElement(v,{resources:a,titles:r,copies:i,images:c,updateValue:this.handleUpdate}),l.a.createElement("hr",null),l.a.createElement("div",{onChange:this.updateObjective},l.a.createElement("label",null,l.a.createElement("input",{type:"radio",value:"LeadGeneration",checked:"LeadGeneration"===o})," LeadGeneration"),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",value:"Conversions",checked:"Conversions"===o})," Conversions"),l.a.createElement("label",null,l.a.createElement("input",{type:"radio",value:"Impressions",checked:"Impressions"===o})," Impressions")),l.a.createElement("input",{type:"submit",value:"Save",disabled:!this.isValid(),onClick:this.handleSave})):null}}]),t}(n.Component),b={templates:"http://localhost:3000/api/v1/templates",resources:"http://localhost:3000/api/v1/products",save:"http://localhost:3000/api/v1/campaigns/create",publish:function(e){return"http://localhost:3000/api/v1/campaigns/".concat(e,"/publish")}},g=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(u.a)(this,Object(s.a)(t).call(this,e))).reset=function(){a.setState({template:null,campaignId:null,error:null})},a.selectTemplate=function(e){var t=a.state.templates.find(function(t){return t.id===e});a.setState({template:t})},a.saveCampaign=function(e){fetch(b.save,{method:"POST",body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){var t=e.id;return a.setState({campaignId:t})}).catch(function(e){return a.setState({error:e})})},a.publishCampaign=function(){var e=a.state.campaignId;fetch(b.publish(e),{method:"PUT"}).then(function(e){return e.json()}).then(function(){return a.reset()}).catch(function(e){return a.setState({error:e})})},a.state={template:null,templates:[],resources:[],campaignId:null,error:null,loading:!0},a}return Object(p.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=fetch(b.templates).then(function(e){return e.json()}).then(function(t){return e.setState({templates:t})}).catch(function(t){return e.setState({error:t})}),a=fetch(b.resources).then(function(e){return e.json()}).then(function(t){return e.setState({resources:t})}).catch(function(t){return e.setState({error:t})});Promise.all([t,a]).then(function(){e.setState({loading:!1})})}},{key:"render",value:function(){var e=this.state,t=e.templates,a=e.resources,n=e.loading,r=e.template,i=e.campaignId;if(n)return l.a.createElement("p",null,"Loading...");var c=r?r.id:"default";return l.a.createElement("div",null,l.a.createElement("a",{href:"http://localhost:3000/api/v1/templates"},"Campaign Templates")," ",l.a.createElement("a",{href:"http://localhost:3000/api/v1/campaigns/published"},"Published Campaigns"),l.a.createElement("hr",null),l.a.createElement(m,{templateId:c,templates:t,handleSelect:this.selectTemplate}),l.a.createElement(f,{resources:a,template:r,saveCampaign:this.saveCampaign}),r&&l.a.createElement("button",{disabled:!i,onClick:this.publishCampaign},"Publish"))}}]),t}(n.Component);i.a.render(l.a.createElement(g,null),document.getElementById("root"))}},[[10,2,1]]]);
//# sourceMappingURL=main.da678d74.chunk.js.map